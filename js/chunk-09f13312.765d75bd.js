(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09f13312"],{"09ef":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-btn",class:t.icon,style:{zIndex:t.zIndex},on:{click:t.goHome}})},o=[],i=(a("a9e3"),a("ac1f"),a("5319"),{name:"homeBtn",props:{icon:{type:String,default:"adv-location-25d"},path:{type:String,default:"/"},zIndex:{type:[String,Number],default:1e3}},methods:{goHome:function(){this.$router.replace(this.path)}}}),r=i,s=(a("8c04"),a("2877")),c=Object(s["a"])(r,n,o,!1,null,"46041240",null);e["a"]=c.exports},"25f0":function(t,e,a){"use strict";var n=a("6eeb"),o=a("825a"),i=a("d039"),r=a("ad6d"),s="toString",c=RegExp.prototype,l=c[s],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=l.name!=s;(u||h)&&n(RegExp.prototype,s,(function(){var t=o(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in c)?r.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},"4ab2":function(t,e,a){},"640c":function(t,e,a){"use strict";a("4ab2")},"6eea":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"calendar",on:{touchstart:function(t){t.stopPropagation()},touchmove:function(t){t.stopPropagation()},touchend:function(t){t.stopPropagation()}}},[a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[t._v(t._s(t.hanziMonth)+"月")]),a("div",{staticClass:"time flex-row-cen-cen",on:{click:t.test}},[t._v(" "+t._s(t.tYear)+"年 "),a("span",{staticClass:"arrow adv-chevron-right"})]),t._m(0)]),t._m(1),a("div",{directives:[{name:"finger",rawName:"v-finger:swipe",value:t.swipeHandler,expression:"swipeHandler",arg:"swipe"}],staticClass:"months"},t._l(t.months,(function(e){return a("div",{key:e.id,staticClass:"month flex-row-sta-cen",style:{left:"calc("+100*e.position+"% + "+t.moveX+"px)",transition:t.moveX?"0.1s":"0.8s"}},t._l(e.days,(function(e,n){return a("div",{key:n,staticClass:"day",class:{currMonthDay:e.isCurrMonth,currDay:e.isNowDate,forecast:e.aqiVal.toString().includes("-")&&"--"!==e.aqiVal},style:{background:e.isCurrMonth?t.getDayBackground(e):"rgb(245, 245, 245)","box-shadow":t.currDayShadow(e)}},[a("div",{staticClass:"date"},[t._v(t._s(e.text))]),t._l(e.primaryPollution,(function(e,n){return a("div",{key:n,staticClass:"primary-pollution"},[t._v(" "+t._s(e)+" ")])})),a("div",{staticClass:"aqi-value"},[t._v(t._s(e.aqiVal))])],2)})),0)})),0),a("div",{staticClass:"pollute-days"},[a("div",{staticClass:"title"},[t._v("污染天数统计")]),a("div",{staticClass:"bottom"},t._l(t.levelData,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("div",{staticClass:"levelValue",style:{background:e.background}}),a("div",{staticClass:"levelText"},[t._v(t._s(e.text))]),a("div",{staticClass:"day-num"},[t._v(t._s(e.value)+"天")])])})),0)]),a("div",{staticClass:"source",on:{click:t.testvalue}},[a("div",{staticClass:"source-item"},[t._v("单位：除AQI无量纲，CO为mg/m³，其余参数单位均为ug/m³")]),a("div",{staticClass:"source-item"},[t._v("数据来源：中国环境监测总站")])]),a("home-btn"),a("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-datetime-picker",{attrs:{type:"year-month","min-date":t.minDate,"max-date":t.maxDate,formatter:t.formatter},on:{change:t.monthChange,confirm:t.submit,cancel:t.cancel},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),a("tab-bar")],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"address flex-row-cen-cen"},[a("span",{staticClass:"location adv-location"}),t._v(" xxx城市 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weeks flex-row-sta-cen"},[a("div",[t._v("日")]),a("div",[t._v("一")]),a("div",[t._v("二")]),a("div",[t._v("三")]),a("div",[t._v("四")]),a("div",[t._v("五")]),a("div",[t._v("六")])])}],i=a("1da1"),r=a("b85c"),s=(a("96cf"),a("caad"),a("2532"),a("ac1f"),a("1276"),a("5319"),a("99af"),a("a15b"),a("a434"),a("d3b7"),a("25f0"),a("d81d"),a("db18")),c=a("09ef"),l={name:"calendar",components:{tabBar:s["a"],homeBtn:c["a"]},computed:{hanziMonth:function(){var t=["一","二","三","四","五","六","七","八","九","十","十一","十二"];return t[this.tMonth-1]},currDayShadow:function(){var t=this;return function(e){if(!e.isNowDate)return"";if(!e.isCurrMonth)return"3px 3px 0 rgba(245, 245, 245, 0.5)";if("--"===!e.aqiVal)return"3px 3px 0 rgba(216, 217, 217, 0.5)";var a;"number"===typeof e.aqiVal?a=e.aqiVal:e.aqiVal.includes("-")&&(a=e.aqiVal.split("-")[1]);var n=t.$common.aqiShadowArr[t.$common.getAqiLevel(a)];return"3px 3px 0 "+n.replace("0.35","0.5")}}},watch:{currentDate:function(t){console.log(t)}},data:function(){return{fullTime:"",copyMonth:"",copyYear:"",tMonth:"",tYear:"",tDate:"",calendarMonth:"",show:!1,minDate:new Date(2019,0,1),maxDate:new Date(2025,10,1),currentDate:new Date,levelData:[{text:"优",background:"",value:"0"},{text:"良",background:"",value:"0"},{text:"轻度",background:"",value:"0"},{text:"中度",background:"",value:"0"},{text:"重度",background:"",value:"0"},{text:"严重",background:"",value:"0"}],months:[],dataSource:"",currMonthText:"",countText:"",countTextArr:["优级天数","良级天数","轻度污染天数","中度污染天数","重度污染天数","严重污染天数"],pollutionCount:[],startX:null,moveX:0,minMoveX:20,cancelTokenId:null}},methods:{onLocation:function(){this.getcalendarData()},cancel:function(){this.show=!1},submit:function(){this.show=!1,this.tMonth=parseInt(this.copyMonth),this.tYear=this.copyYear;var t="".concat(this.tYear,"-").concat(this.copyMonth);this.initCalendar(t),this.getcalendarData()},monthChange:function(t){var e=t.getValues().join("-");console.log(t.getValues()),this.copyYear=e.substring(0,4);var a=e.substring(e.length-3);this.copyMonth=a.substring(0,2)},testvalue:function(){console.log(this.months)},formatter:function(t,e){return"year"===t?"".concat(e,"年"):"month"===t?"".concat(e,"月"):e},test:function(){this.show=!0},closePanel:function(){this.$emit("close")},swipeHandler:function(t){var e=t.direction;"Left"===e?this.nextMonth():"Right"===e&&this.prevMonth()},touchstart:function(t){console.log(t),this.startX=t.changedTouches[0].pageX},touchmove:function(t){var e=t.changedTouches[0].pageX,a=e-this.startX;Math.abs(a)<=this.minMoveX||(this.moveX=a)},touchend:function(t){var e=t.changedTouches[0].pageX,a=e-this.startX;Math.abs(a)<=this.minMoveX?this.moveX=0:(a<0&&this.nextMonth(),a>0&&this.prevMonth())},setMonthText:function(t){var e=t.split("/");this.currMonthText="".concat(e[0],"年").concat(e[1],"月")},prevMonth:function(){var t=this,e=this.months[0].monthStr,a=e.substring(e.length-2);this.tMonth=parseInt(a),this.tYear=e.substring(0,4);var n=this.$common.getPrevMonth(e,"/"),o=this.getMonthDays(new Date(n+"/01"));this.moveX=0;var i,s=Object(r["a"])(this.months);try{for(s.s();!(i=s.n()).done;){var c=i.value;c.position++}}catch(l){s.e(l)}finally{s.f()}this.months.splice(0,0),this.months.unshift({id:(new Date).getTime(),days:o,position:-1,monthStr:n}),this.setMonthText(e),setTimeout((function(){t.months.pop(),t.getcalendarData()}),1)},nextMonth:function(){var t=this,e=this.months[2].monthStr,a=e.substring(e.length-2);this.tMonth=parseInt(a),this.tYear=e.substring(0,4);var n=this.$common.getNextMonth(e,"/"),o=this.getMonthDays(new Date(n+"/01"));this.moveX=0;var i,s=Object(r["a"])(this.months);try{for(s.s();!(i=s.n()).done;){var c=i.value;c.position--}}catch(l){s.e(l)}finally{s.f()}this.months.splice(0,0),this.months.push({id:(new Date).getTime(),days:o,position:1,monthStr:n}),this.setMonthText(e),setTimeout((function(){t.months.shift(),t.getcalendarData()}),1)},getMonthDays:function(t){if(t instanceof Date||(t=new Date(t)),"Invalid Date"===t.toString())return[];var e=new Date,a=e.getFullYear(),n=e.getMonth(),o=e.getDate(),i=t.getFullYear(),r=t.getMonth(),s=new Date(i,r+1,0).getDate(),c=new Date(i,r,0),l=c.getDate(),u=c.getDay(),h=new Date(i,r+2,0),d=[];if(u<6)for(var v=D(c),m=u;m>=0;m--){var f=l-m;d.push({text:f,isCurrMonth:!1,isNowDate:v&&f===o,aqiVal:"",background:"rgb(245,245,245)",color:"rgb(245,245,245)"})}for(var g=D(t),p=1;p<=s;p++){var b=p;d.push({text:b,isCurrMonth:!0,isNowDate:g&&b===o,aqiVal:"",background:"rgb(245,245,245)",color:"rgb(245,245,245)"})}g=D(h);for(var y=1;d.length<42;y++){var x=y;d.push({text:x,isCurrMonth:!1,isNowDate:g&&x===o,aqiVal:"",background:"rgb(245,245,245)",color:"rgb(245,245,245)"})}return d;function D(t){var e=t.getFullYear(),o=t.getMonth();return e===a&&o===n}},proCurrMonthData:function(t){var e,a=0,n=Object(r["a"])(this.months[1].days);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o.isCurrMonth){var i=t[a]||{};o.aqiVal=i.value||"--",o.background=i.color,o.primaryPollution=i.primaryPollution||"--",o.primaryPollution=o.primaryPollution.split(","),a++}else o.aqiVal="--",o.primaryPollution=["--"],o.background="rgb(245,245,245)",o.color="rgb(245,245,245)"}}catch(s){n.e(s)}finally{n.f()}},proCountText:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=0,n="",o=Object(r["a"])(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;i>0&&(n+="".concat(this.countTextArr[a]).concat(i,"天，")),a++}}catch(s){o.e(s)}finally{o.f()}n&&(n="月"+n,n=n.replace(/(.*)，/,"$1。")),this.countText=n},initCalendar:function(t){t=t.replace(/\-/g,"/");var e=this.getMonthDays(new Date(t+"/01")),a=this.$common.getPrevMonth(t,"/"),n=this.getMonthDays(new Date(a+"/01")),o=this.$common.getNextMonth(t,"/"),i=this.getMonthDays(new Date(o+"/01"));this.months=[{id:10*(new Date).getTime()+1,days:n,position:-1,monthStr:a},{id:10*(new Date).getTime()+2,days:e,position:0,monthStr:t},{id:10*(new Date).getTime()+3,days:i,position:1,monthStr:o}],this.setMonthText(t)},getcalendarData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$cancelAxios(t.cancelTokenId),a={cityCode:t.cityCode,year:t.tYear,month:t.tMonth},e.next=4,t.$http.getAirCalendar(a);case 4:n=e.sent,0===n.status&&n.data?(o=n.data.datas,i=n.data.count,t.proCurrMonthData(o),t.proCountText(i),t.pollutionCount=i||[],t.levelData.map((function(e,a){t.$set(e,"value",i[a]),t.$set(e,"background",t.$common.aqiColorArr[a])}))):(t.proCountText([]),t.pollutionCount=[]);case 6:case"end":return e.stop()}}),e)})))()},getDayBackground:function(t){var e="";return e=t.aqiVal.toString().includes("-")&&"--"!==t.aqiVal?"linear-gradient(90deg, ".concat(this.$common.aqiColorArr[this.$common.getAqiLevel(t.aqiVal.split("-")[0])]," 0%, ").concat(this.$common.aqiColorArr[this.$common.getAqiLevel(t.aqiVal.split("-")[1])]," 100%)"):this.$common.aqiColorArr[this.$common.getAqiLevel(t.aqiVal)],e}},mounted:function(){var t=new Date,e=t.getFullYear();this.tYear=t.getFullYear();var a=t.getMonth()+1;this.tMonth=t.getMonth()+1,this.tDate=t.getDate(),a<10&&(a="0".concat(a)),this.copyYear=e,this.copyMonth=a,this.fullTime="".concat(e,"-").concat(a),this.initCalendar(this.fullTime)}},u=l,h=(a("640c"),a("2877")),d=Object(h["a"])(u,n,o,!1,null,"3bf3ab03",null);e["default"]=d.exports},7041:function(t,e,a){},"8c04":function(t,e,a){"use strict";a("7041")},a15b:function(t,e,a){"use strict";var n=a("23e7"),o=a("44ad"),i=a("fc6a"),r=a("a640"),s=[].join,c=o!=Object,l=r("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},d81d:function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").map,i=a("1dde"),r=i("map");n({target:"Array",proto:!0,forced:!r},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},db18:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-bar"},[a("van-tabbar",{attrs:{placeholder:""},on:{change:t.routerChange},model:{value:t.curPath,callback:function(e){t.curPath=e},expression:"curPath"}},[t._l(t.$store.state.tabbarList,(function(e,n){return[a("van-tabbar-item",{key:n,attrs:{name:e.path,icon:e.icon}},[t._v(t._s(e.name))])]}))],2)],1)},o=[],i=(a("ac1f"),a("5319"),{name:"tabBar",watch:{"$route.path":{handler:function(t,e){this.curPath=t},deep:!0,immediate:!0}},computed:{},data:function(){return{curPath:this.$route.path}},methods:{routerChange:function(t){this.curPath=t,this.$router.replace(t)}}}),r=i,s=a("2877"),c=Object(s["a"])(r,n,o,!1,null,"dbbd4d84",null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-09f13312.765d75bd.js.map